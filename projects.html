<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Projects</title>

<meta name="description" content="Quantitative systems, research papers, and experiments by Arya Somu." />
<meta property="og:title" content="Projects — Arya Somu" />
<meta property="og:description" content="Quantitative systems, research papers, and experiments." />
<meta property="og:type" content="website" />
<meta name="theme-color" content="#0f0f10" />

<style>
:root{
  --bg:#0a0a0b;
  --fg:#e7e7ea;
  --muted:#a3a3ad;
  --card:rgba(18,18,20,0.92);
  --accent:#6ee7ff;
  --ring:#2b2b33;
  --shadow:0 16px 50px rgba(0,0,0,.45);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:
    radial-gradient(1100px 740px at 50% 10%, rgba(20,20,22,1) 0%, var(--bg) 72%),
    radial-gradient(900px 600px at 10% 20%, rgba(110,231,255,.06), transparent 60%),
    radial-gradient(900px 600px at 90% 60%, rgba(110,231,255,.04), transparent 55%);
  color:var(--fg);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

a{color:inherit}
.mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;}
.container{width:min(1120px,92vw); margin:0 auto; padding:36px 0 90px}

/* top nav */
.topbar{
  display:flex; justify-content:space-between; align-items:center;
  gap:14px; margin-bottom:18px;
}
.home{
  display:inline-flex; align-items:center; gap:10px;
  padding:10px 12px; border-radius:14px;
  border:1px solid var(--ring);
  text-decoration:none;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));
  transition:transform .06s ease, border-color .2s ease;
  font-size:14px;
}
.home:hover{transform:translateY(-1px); border-color:var(--accent)}
.pillrow{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
.pill{
  display:inline-flex; align-items:center; gap:8px;
  padding:9px 12px; border-radius:999px;
  border:1px solid var(--ring);
  text-decoration:none;
  font-size:13px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));
  transition:transform .06s ease, border-color .2s ease;
}
.pill:hover{transform:translateY(-1px); border-color:var(--accent)}

/* hero */
.hero{
  border:1px solid var(--ring);
  border-radius:22px;
  background:var(--card);
  box-shadow:var(--shadow);
  padding:26px;
  margin-bottom:16px;
}
.hero h1{
  margin:0;
  font-size:clamp(30px,4.5vw,48px);
  letter-spacing:-.03em;
  line-height:1.1;
}
.hero p{
  margin:10px 0 0;
  color:var(--muted);
  max-width:78ch;
  line-height:1.55;
  font-size:15px;
}

/* spotlight */
.spotlight{
  margin:14px 0 18px;
  padding:18px;
  border-radius:20px;
  border:1px solid rgba(110,231,255,.42);
  background:
    radial-gradient(720px 320px at 14% 0%, rgba(110,231,255,.09), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.12)),
    var(--card);
  box-shadow:0 18px 65px rgba(0,0,0,.5);
}
.spotlight-top{
  display:flex; justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap;
}
.spotlight h2{margin:0; font-size:16px; letter-spacing:-.01em}
.kicker{color:var(--muted); font-size:12px; margin-top:6px; line-height:1.4}
.spotlight-grid{
  margin-top:14px;
  display:grid;
  grid-template-columns: 2.2fr 1fr;
  gap:16px;
}
@media(max-width:900px){ .spotlight-grid{grid-template-columns:1fr} }
.metric{
  font-size:12px;
  color:var(--muted);
  border-left:2px solid var(--accent);
  padding-left:10px;
  margin:8px 0;
}
.spot-actions{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; align-items:flex-start}
.btn{
  display:inline-flex; align-items:center; gap:8px;
  font-size:13px; text-decoration:none;
  padding:9px 12px;
  border:1px solid var(--ring);
  border-radius:14px;
  background:rgba(0,0,0,0.14);
  transition:transform .06s ease, border-color .2s ease;
}
.btn:hover{transform:translateY(-1px); border-color:var(--accent)}

/* view controls */
.viewbar{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; flex-wrap:wrap;
  margin:14px 0 14px;
}
.filters{
  display:flex; gap:10px; flex-wrap:wrap;
}
.filter{
  padding:7px 14px;
  border-radius:999px;
  border:1px solid var(--ring);
  background:rgba(0,0,0,0.10);
  font-size:12px;
  cursor:pointer;
  color:var(--muted);
  transition:border-color .2s ease, transform .06s ease, color .2s ease;
}
.filter:hover{transform:translateY(-1px); border-color:rgba(110,231,255,.5); color:var(--fg)}
.filter.active{border-color:var(--accent); color:var(--fg)}

.switch{
  display:flex; gap:10px; flex-wrap:wrap;
}
.switchbtn{
  padding:7px 14px;
  border-radius:999px;
  border:1px solid var(--ring);
  background:rgba(0,0,0,0.10);
  font-size:12px;
  cursor:pointer;
  color:var(--muted);
  transition:border-color .2s ease, transform .06s ease, color .2s ease;
}
.switchbtn:hover{transform:translateY(-1px); border-color:rgba(110,231,255,.5); color:var(--fg)}
.switchbtn.active{border-color:var(--accent); color:var(--fg)}

/* GRID */
.projects{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(360px,1fr));
  gap:16px;
}
@media(max-width:420px){ .projects{grid-template-columns:1fr} }

.project{
  border-radius:18px;
  border:1px solid var(--ring);
  background:var(--card);
  padding:16px;
  box-shadow:0 14px 44px rgba(0,0,0,.35);
  transition:transform .06s ease, border-color .2s ease;
}
.project:hover{transform:translateY(-1px); border-color:rgba(110,231,255,.55)}
.project:target{
  border-color:rgba(110,231,255,.85);
  box-shadow:0 0 0 2px rgba(110,231,255,.22), 0 18px 70px rgba(0,0,0,.55);
}
.top{
  display:flex; justify-content:space-between; align-items:flex-start; gap:12px;
}
.title{
  margin:0;
  font-size:16px;
  letter-spacing:-.01em;
  line-height:1.25;
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}
.badges{display:flex; gap:8px; flex-wrap:wrap; margin-top:8px}
.badge{
  font-size:11px;
  padding:5px 10px;
  border-radius:999px;
  border:1px solid var(--ring);
  color:var(--muted);
  background:rgba(0,0,0,0.10);
  white-space:nowrap;
}
.maturity{
  border-color:rgba(110,231,255,.35);
  color:rgba(231,231,234,.95);
}
.desc{
  margin:10px 0 0;
  color:var(--muted);
  font-size:13px;
  line-height:1.55;
}

/* action links */
.actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:flex-end;
}
.link{
  font-size:13px;
  text-decoration:none;
  padding:8px 10px;
  border:1px solid var(--ring);
  border-radius:12px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));
  transition:transform .06s ease, border-color .2s ease;
}
.link:hover{transform:translateY(-1px); border-color:var(--accent)}

/* signal meter */
.meter{
  margin-top:12px;
  padding:12px;
  border-radius:16px;
  border:1px solid var(--ring);
  background:rgba(0,0,0,0.10);
}
.mrow{
  display:flex; justify-content:space-between; align-items:center; gap:10px;
  font-size:12px; color:var(--muted);
  margin:7px 0;
}
.bar{
  height:7px;
  border-radius:999px;
  border:1px solid var(--ring);
  background:rgba(0,0,0,0.12);
  overflow:hidden;
  flex: 1 1 auto;
  margin-left:12px;
}
.fill{
  height:100%;
  background:rgba(110,231,255,.55);
  box-shadow:0 0 18px rgba(110,231,255,.18);
}

/* expandable case study */
.toggle{
  margin-top:10px;
  display:inline-flex;
  align-items:center;
  gap:8px;
  color:var(--accent);
  font-size:12px;
  cursor:pointer;
  user-select:none;
}
.details{
  margin-top:10px;
  border-top:1px solid var(--ring);
  padding-top:10px;
  display:none;
}
.details p{
  margin:7px 0;
  font-size:13px;
  line-height:1.55;
}
.details b{color:rgba(231,231,234,.95)}
.smallmuted{color:var(--muted)}

/* MAP */
.mapwrap{
  display:none;
  border-radius:22px;
  border:1px solid rgba(110,231,255,.22);
  background:
    radial-gradient(900px 520px at 20% 10%, rgba(110,231,255,.10), transparent 55%),
    radial-gradient(900px 520px at 90% 70%, rgba(110,231,255,.07), transparent 55%),
    var(--card);
  box-shadow:0 18px 70px rgba(0,0,0,.55);
  padding:14px;
  overflow:hidden;
  position:relative;
}
.maphead{
  display:flex; align-items:flex-end; justify-content:space-between;
  gap:12px; flex-wrap:wrap; margin:4px 6px 10px;
}
.maphead .title{
  font-size:12px;
  letter-spacing:0.08em;
  text-transform:uppercase;
  color:var(--muted);
  margin:0;
}
.maphead .note{
  color:var(--muted);
  font-size:12px;
  line-height:1.4;
}
.mapbar{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:space-between;
  margin:0 6px 10px;
}
.mapcontrols{
  display:flex; gap:10px; flex-wrap:wrap; align-items:center;
}
.mapbtn{
  padding:7px 12px;
  border-radius:999px;
  border:1px solid var(--ring);
  background:rgba(0,0,0,0.10);
  font-size:12px;
  cursor:pointer;
  color:var(--muted);
  transition:transform .06s ease, border-color .2s ease, color .2s ease;
}
.mapbtn:hover{transform:translateY(-1px); border-color:rgba(110,231,255,.55); color:var(--fg)}
.mapbtn.active{border-color:var(--accent); color:var(--fg)}
.mapstatus{
  display:flex; gap:10px; flex-wrap:wrap; align-items:center;
  color:var(--muted); font-size:12px;
}
.dot{
  width:7px; height:7px; border-radius:999px;
  background:rgba(110,231,255,.55);
  box-shadow:0 0 16px rgba(110,231,255,.25);
  display:inline-block;
}

.mapcanvas{
  width:100%;
  border-radius:18px;
  border:1px solid rgba(43,43,51,0.85);
  background:
    radial-gradient(1000px 540px at 50% 50%, rgba(255,255,255,0.02), rgba(0,0,0,0.14));
  overflow:hidden;
  position:relative;
}

/* tooltip card (floating) */
.tip{
  position:absolute;
  min-width:240px;
  max-width:320px;
  pointer-events:none;
  opacity:0;
  transform:translateY(6px);
  transition:opacity .12s ease, transform .12s ease;
  border-radius:16px;
  border:1px solid rgba(110,231,255,.25);
  background:rgba(18,18,20,0.92);
  box-shadow:0 18px 70px rgba(0,0,0,0.55);
  padding:12px;
  z-index:4;
}
.tip strong{display:block; font-size:13px; letter-spacing:-0.01em; color:var(--fg)}
.tip .sub{margin-top:4px; font-size:12px; color:var(--muted); line-height:1.4}
.tip .chips{display:flex; gap:7px; flex-wrap:wrap; margin-top:10px}
.tip .chip{
  font-size:11px;
  padding:5px 10px;
  border-radius:999px;
  border:1px solid var(--ring);
  background:rgba(0,0,0,0.10);
  color:var(--muted);
}
.tip .hint{
  margin-top:10px;
  font-size:11px;
  color:rgba(231,231,234,0.75);
}

/* SVG styling */
svg{width:100%; height:520px; display:block;}
.edge{
  stroke:rgba(163,163,173,0.30);
  stroke-width:1.1;
  vector-effect:non-scaling-stroke;
}
.edge.flow{
  stroke:rgba(110,231,255,0.22);
  stroke-width:2.6;
  filter:url(#glow);
  stroke-dasharray:7 10;
  vector-effect:non-scaling-stroke;
}
.particle{
  fill:rgba(110,231,255,0.55);
  filter:url(#glowSoft);
}
.node{
  cursor:pointer;
  outline:none;
}
.node circle{
  fill:rgba(0,0,0,0.22);
  stroke:rgba(110,231,255,0.55);
  stroke-width:1.3;
  vector-effect:non-scaling-stroke;
}
.node:hover circle{stroke:rgba(110,231,255,0.95)}
.node:focus-visible circle{
  stroke:rgba(110,231,255,0.98);
  filter:url(#glow);
}
.node text{
  fill:rgba(231,231,234,0.95);
  font-size:12px;
  letter-spacing:-0.01em;
  user-select:none;
  pointer-events:none;
}
.node .meta{
  fill:rgba(163,163,173,0.92);
  font-size:11px;
}

/* mini HUD */
.hud{
  position:absolute;
  right:12px;
  bottom:12px;
  border-radius:16px;
  border:1px solid rgba(43,43,51,0.85);
  background:rgba(0,0,0,0.22);
  padding:10px 12px;
  color:rgba(231,231,234,0.86);
  font-size:12px;
  line-height:1.35;
  backdrop-filter: blur(6px);
  z-index:3;
}
.hud .mono{opacity:.95}
kbd{
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size:11px;
  padding:2px 6px;
  border-radius:8px;
  border:1px solid var(--ring);
  background:rgba(0,0,0,0.12);
  color:var(--fg);
}

footer{
  margin-top:26px;
  color:var(--muted);
  font-size:12px;
  display:flex; justify-content:space-between;
  gap:12px; flex-wrap:wrap;
}
</style>
</head>

<body>
<div class="container">

  <div class="topbar">
    <a class="home" href="./">← Home</a>
    <div class="pillrow">
      <a class="pill" href="experience.html"><span class="mono">→</span> Experience</a>
      <a class="pill" href="aboutme.html"><span class="mono">→</span> About</a>
      <a class="pill" href="mailto:aryasomu18@gmail.com"><span class="mono">@</span> Contact</a>
    </div>
  </div>

  <section class="hero">
    <h1>Projects</h1>
    <p>
      Selected builds, research, and experiments. I care about mechanics, incentives, and failure modes —
      not demos. More on GitHub.
    </p>

    <section class="spotlight" aria-label="spotlight project">
      <div class="spotlight-top">
        <div>
          <h2>Spotlight · executionrl</h2>
          <div class="kicker">Reinforcement-learning execution simulator modeling slippage + constraints.</div>
        </div>
        <div class="spot-actions">
          <a class="btn" href="https://github.com/arpjw/executionrl" target="_blank" rel="noopener">GitHub</a>
          <a class="btn" href="https://github.com/arpjw/executionrl/blob/main/README.md" target="_blank" rel="noopener">Write-up</a>
        </div>
      </div>

      <div class="spotlight-grid">
        <div>
          <div class="metric"><span class="mono">State</span>: depth / inventory / time remaining</div>
          <div class="metric"><span class="mono">Action</span>: trade size vs wait decision</div>
          <div class="metric"><span class="mono">Reward</span>: execution cost + impact penalty</div>
          <div class="metric"><span class="mono">Goal</span>: learn policy under varying liquidity regimes</div>
        </div>
        <div>
          <div class="meter">
            <div class="mrow"><span>Impact</span><div class="bar"><div class="fill" style="width:78%"></div></div></div>
            <div class="mrow"><span>Depth</span><div class="bar"><div class="fill" style="width:86%"></div></div></div>
            <div class="mrow"><span>Polish</span><div class="bar"><div class="fill" style="width:62%"></div></div></div>
          </div>
          <div class="smallmuted" style="margin-top:10px; font-size:12px; line-height:1.5;">
            This is the “systems” project: constraints first, learn policy second.
          </div>
        </div>
      </div>
    </section>
  </section>

  <div class="viewbar" aria-label="view controls">
    <div class="filters" aria-label="filters">
      <span class="filter active" data-filter="all">All</span>
      <span class="filter" data-filter="cpp">C++</span>
      <span class="filter" data-filter="rl">RL</span>
      <span class="filter" data-filter="research">Research</span>
    </div>

    <div class="switch" aria-label="view switch">
      <span class="switchbtn active" data-view="grid">Grid</span>
      <span class="switchbtn" data-view="map">Projects Map</span>
    </div>
  </div>

  <!-- MAP VIEW -->
  <section class="mapwrap" id="mapwrap" aria-label="projects map">
    <div class="maphead">
      <p class="title">Projects Map</p>
      <div class="note">
        Drag nodes. Scroll to zoom. Drag background to pan. Click a node to jump.
        <span class="mono"><kbd>Esc</kbd></span> returns to Grid.
      </div>
    </div>

    <div class="mapbar">
      <div class="mapcontrols">
        <button class="mapbtn active" id="btnRun" type="button">Live</button>
        <button class="mapbtn" id="btnFreeze" type="button">Freeze</button>
        <button class="mapbtn" id="btnReset" type="button">Reset View</button>
      </div>
      <div class="mapstatus">
        <span><span class="dot"></span> flow</span>
        <span class="mono" id="fps">— fps</span>
      </div>
    </div>

    <div class="mapcanvas" id="mapcanvas">
      <!-- floating tooltip -->
      <div class="tip" id="tip">
        <strong id="tipTitle">—</strong>
        <div class="sub" id="tipSub">—</div>
        <div class="chips" id="tipChips"></div>
        <div class="hint" id="tipHint">Click to open.</div>
      </div>

      <svg id="mapsvg" viewBox="0 0 1100 520" role="img" aria-label="Interactive project relationship graph">
        <defs>
          <filter id="glow" x="-40%" y="-40%" width="180%" height="180%">
            <feGaussianBlur stdDeviation="2.4" result="b"/>
            <feMerge>
              <feMergeNode in="b"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
          <filter id="glowSoft" x="-60%" y="-60%" width="220%" height="220%">
            <feGaussianBlur stdDeviation="3.6" result="b"/>
            <feMerge>
              <feMergeNode in="b"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>

        <!-- background pan layer -->
        <rect id="bg" x="0" y="0" width="1100" height="520" fill="transparent"></rect>

        <!-- graph root (panned/zoomed) -->
        <g id="root">
          <g id="edges"></g>
          <g id="flows"></g>
          <g id="particles"></g>
          <g id="nodes"></g>
        </g>
      </svg>

      <div class="hud">
        <div class="mono">controls</div>
        <div style="margin-top:6px;">
          drag node · pan bg · wheel zoom · <kbd>Esc</kbd> grid
        </div>
      </div>
    </div>
  </section>

  <!-- GRID VIEW -->
  <section class="projects" id="grid" aria-label="projects grid">

    <!-- executionrl -->
    <article class="project" id="executionrl" data-tags="rl cpp">
      <div class="top">
        <div>
          <p class="title">executionrl <span class="badge maturity">Growing</span></p>
          <div class="badges">
            <span class="badge">C++</span>
            <span class="badge">Reinforcement learning</span>
            <span class="badge">Q-learning</span>
            <span class="badge">Simulation</span>
            <span class="badge">Backtesting</span>
          </div>
        </div>
        <div class="actions">
          <a class="link" href="https://github.com/arpjw/executionrl" target="_blank" rel="noopener">GitHub</a>
          <a class="link" href="https://github.com/arpjw/executionrl/blob/main/README.md" target="_blank" rel="noopener">Write-up</a>
          <a class="link" href="https://github.com/arpjw/ExecutionAlgoSim" target="_blank" rel="noopener">Related</a>
        </div>
      </div>

      <p class="desc">Reinforcement learning–based trade execution simulator.</p>

      <div class="meter" aria-label="signal meter">
        <div class="mrow"><span>Impact</span><div class="bar"><div class="fill" style="width:78%"></div></div></div>
        <div class="mrow"><span>Depth</span><div class="bar"><div class="fill" style="width:86%"></div></div></div>
        <div class="mrow"><span>Polish</span><div class="bar"><div class="fill" style="width:62%"></div></div></div>
      </div>

      <div class="toggle" role="button" tabindex="0" aria-expanded="false">View case study →</div>
      <div class="details">
        <p><b>Problem:</b> Fixed execution schedules (TWAP/VWAP) ignore state-dependent liquidity.</p>
        <p><b>Approach:</b> Discrete-time environment; Q-learning chooses when/how much to trade under constraints.</p>
        <p><b>What matters:</b> reward design, impact modeling, and state definition dominate learning stability.</p>
        <p><b>Next:</b> richer market-impact model + more granular order book simulation.</p>
      </div>
    </article>

    <article class="project" id="executionalgosim" data-tags="cpp">
      <div class="top">
        <div>
          <p class="title">ExecutionAlgoSim <span class="badge maturity">Prototype</span></p>
          <div class="badges">
            <span class="badge">C++</span>
            <span class="badge">TWAP</span>
            <span class="badge">VWAP</span>
            <span class="badge">POV</span>
            <span class="badge">Simulation</span>
          </div>
        </div>
        <div class="actions">
          <a class="link" href="https://github.com/arpjw/ExecutionAlgoSim" target="_blank" rel="noopener">GitHub</a>
        </div>
      </div>

      <p class="desc">Execution algorithm simulator (TWAP/VWAP/POV) under order book constraints.</p>

      <div class="meter">
        <div class="mrow"><span>Impact</span><div class="bar"><div class="fill" style="width:66%"></div></div></div>
        <div class="mrow"><span>Depth</span><div class="bar"><div class="fill" style="width:70%"></div></div></div>
        <div class="mrow"><span>Polish</span><div class="bar"><div class="fill" style="width:56%"></div></div></div>
      </div>

      <div class="toggle" role="button" tabindex="0" aria-expanded="false">View case study →</div>
      <div class="details">
        <p><b>Problem:</b> Need baselines to compare learning-based execution against.</p>
        <p><b>Approach:</b> Simulated schedules with constraint checks and execution cost accounting.</p>
        <p><b>Why it matters:</b> establishes a “control group” for executionrl experiments.</p>
      </div>
    </article>

    <article class="project" id="quantprojects" data-tags="research">
      <div class="top">
        <div>
          <p class="title">quant project library <span class="badge maturity">Core</span></p>
          <div class="badges">
            <span class="badge">Python</span>
            <span class="badge">Time series</span>
            <span class="badge">Portfolio optimization</span>
            <span class="badge">Risk</span>
            <span class="badge">Backtesting</span>
          </div>
        </div>
        <div class="actions">
          <a class="link" href="https://github.com/arpjw/quant-projects" target="_blank" rel="noopener">GitHub</a>
          <a class="link" href="https://github.com/arpjw/quant-projects/blob/main/README.md" target="_blank" rel="noopener">Write-up</a>
        </div>
      </div>

      <p class="desc">Documentation of quantitative research and development projects.</p>

      <div class="meter">
        <div class="mrow"><span>Impact</span><div class="bar"><div class="fill" style="width:70%"></div></div></div>
        <div class="mrow"><span>Depth</span><div class="bar"><div class="fill" style="width:74%"></div></div></div>
        <div class="mrow"><span>Polish</span><div class="bar"><div class="fill" style="width:72%"></div></div></div>
      </div>

      <div class="toggle" role="button" tabindex="0" aria-expanded="false">View case study →</div>
      <div class="details">
        <p><b>Problem:</b> Quant work gets lost without a consistent “research → build” pipeline.</p>
        <p><b>Approach:</b> Central repo that standardizes project structure, assumptions, and evaluation notes.</p>
        <p><b>Why it matters:</b> makes projects reproducible and reduces narrative-driven overfitting.</p>
      </div>
    </article>

    <article class="project" id="miniquantlib" data-tags="cpp">
      <div class="top">
        <div>
          <p class="title">miniquantlib <span class="badge maturity">Prototype</span></p>
          <div class="badges">
            <span class="badge">C++</span>
            <span class="badge">Linear algebra</span>
            <span class="badge">Numerical computing</span>
            <span class="badge">Performance</span>
            <span class="badge">Utilities</span>
          </div>
        </div>
        <div class="actions">
          <a class="link" href="https://github.com/arpjw/miniquantlib" target="_blank" rel="noopener">GitHub</a>
          <a class="link" href="https://github.com/arpjw/miniquantlib/blob/main/README.md" target="_blank" rel="noopener">Write-up</a>
        </div>
      </div>

      <p class="desc">A minimal C++ library for vector and matrix operations, built from scratch to explore numerical computing and performance-oriented design.</p>

      <div class="meter">
        <div class="mrow"><span>Impact</span><div class="bar"><div class="fill" style="width:58%"></div></div></div>
        <div class="mrow"><span>Depth</span><div class="bar"><div class="fill" style="width:80%"></div></div></div>
        <div class="mrow"><span>Polish</span><div class="bar"><div class="fill" style="width:60%"></div></div></div>
      </div>

      <div class="toggle" role="button" tabindex="0" aria-expanded="false">View case study →</div>
      <div class="details">
        <p><b>Problem:</b> High-level libraries hide important implementation tradeoffs.</p>
        <p><b>Approach:</b> Build primitives explicitly: layout, allocation, operations, and interfaces.</p>
        <p><b>Learning:</b> cache locality and predictable allocation patterns can dominate “clever math”.</p>
      </div>
    </article>

    <article class="project" id="prngpaper" data-tags="research">
      <div class="top">
        <div>
          <p class="title">Pseudorandom Number Generation with Xor Shifting <span class="badge maturity">Paper</span></p>
          <div class="badges">
            <span class="badge">Research</span>
            <span class="badge">PRNG</span>
            <span class="badge">Xor shift</span>
            <span class="badge">Cryptography</span>
            <span class="badge">Simulation</span>
          </div>
        </div>
        <div class="actions">
          <a class="link" href="assets/papers/Arya%20Somu%20-%20Xor%20Shifting.pdf" target="_blank" rel="noopener">PDF</a>
        </div>
      </div>

      <p class="desc">Investigative paper on xor-shift PRNG design and analysis, combining mathematical modeling and simulation with security implications.</p>

      <div class="meter">
        <div class="mrow"><span>Impact</span><div class="bar"><div class="fill" style="width:52%"></div></div></div>
        <div class="mrow"><span>Depth</span><div class="bar"><div class="fill" style="width:76%"></div></div></div>
        <div class="mrow"><span>Polish</span><div class="bar"><div class="fill" style="width:82%"></div></div></div>
      </div>

      <div class="toggle" role="button" tabindex="0" aria-expanded="false">View case study →</div>
      <div class="details">
        <p><b>Problem:</b> “Fast” RNGs often get used where statistical quality actually matters.</p>
        <p><b>Approach:</b> Analyze xor-shift structure + run simulations to test statistical behavior.</p>
        <p><b>Takeaway:</b> performance is cheap; randomness quality is not.</p>
      </div>
    </article>

  </section>

  <footer>
    <span class="mono">© <span id="y"></span> Arya Somu</span>
  </footer>

</div>

<script>
document.getElementById('y').textContent = new Date().getFullYear();

/* =======================
   GRID: expand + filter
======================= */
function toggleDetails(toggleEl){
  const details = toggleEl.nextElementSibling;
  const isOpen = details.style.display === "block";
  details.style.display = isOpen ? "none" : "block";
  toggleEl.textContent = isOpen ? "View case study →" : "Hide case study ←";
  toggleEl.setAttribute("aria-expanded", String(!isOpen));
}

document.querySelectorAll('.toggle').forEach(t=>{
  t.addEventListener('click', ()=>toggleDetails(t));
  t.addEventListener('keydown', (e)=>{
    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleDetails(t); }
  });
});

function setFilter(tag){
  document.querySelectorAll('.filter').forEach(x=>x.classList.remove('active'));
  const btn = document.querySelector(`.filter[data-filter="${tag}"]`) || document.querySelector('.filter[data-filter="all"]');
  if (btn) btn.classList.add('active');

  document.querySelectorAll('.project').forEach(p=>{
    const tags = p.dataset.tags || "";
    p.style.display = (tag === "all" || tags.includes(tag)) ? "block" : "none";
  });
}

document.querySelectorAll('.filter').forEach(f=>{
  f.addEventListener('click', ()=>setFilter(f.dataset.filter));
});

/* =======================
   View switching
======================= */
const grid = document.getElementById('grid');
const mapwrap = document.getElementById('mapwrap');

function setView(view){
  document.querySelectorAll('.switchbtn').forEach(x=>x.classList.remove('active'));
  const btn = document.querySelector(`.switchbtn[data-view="${view}"]`);
  if (btn) btn.classList.add('active');

  if (view === 'map'){
    mapwrap.style.display = "block";
    grid.style.display = "none";
    window.scrollTo({ top: mapwrap.getBoundingClientRect().top + window.scrollY - 18, behavior: "smooth" });
    startMap();
  } else {
    mapwrap.style.display = "none";
    grid.style.display = "grid";
    stopMap();
  }
}

document.querySelectorAll('.switchbtn').forEach(b=>{
  b.addEventListener('click', ()=>setView(b.dataset.view));
});

function jumpToProject(id){
  setView('grid');
  setFilter('all');
  const el = document.getElementById(id);
  if (!el) return;
  const y = el.getBoundingClientRect().top + window.scrollY - 18;
  window.scrollTo({ top: y, behavior: "smooth" });
  history.replaceState(null, "", "#" + id);
}

document.addEventListener('keydown', (e)=>{
  if (e.key === 'Escape'){
    const mapVisible = mapwrap.style.display === "block";
    if (mapVisible) setView('grid');
  }
});

/* =======================
   MAP: Force graph + pan/zoom + animated flows
   No libraries. Pure SVG + JS.
======================= */
let raf = null;
let running = false;

const svg = document.getElementById('mapsvg');
const root = document.getElementById('root');
const edgesG = document.getElementById('edges');
const flowsG = document.getElementById('flows');
const nodesG = document.getElementById('nodes');
const particlesG = document.getElementById('particles');
const bg = document.getElementById('bg');
const canvas = document.getElementById('mapcanvas');

const tip = document.getElementById('tip');
const tipTitle = document.getElementById('tipTitle');
const tipSub = document.getElementById('tipSub');
const tipChips = document.getElementById('tipChips');
const tipHint = document.getElementById('tipHint');
const fpsEl = document.getElementById('fps');

const btnRun = document.getElementById('btnRun');
const btnFreeze = document.getElementById('btnFreeze');
const btnReset = document.getElementById('btnReset');

const VIEW_W = 1100;
const VIEW_H = 520;

const clamp = (v,a,b)=>Math.max(a,Math.min(b,v));
const lerp = (a,b,t)=>a+(b-a)*t;

function rand(min,max){ return min + Math.random()*(max-min); }

const graph = {
  nodes: [
    { id:"executionrl", label:"executionrl", sub:"RL execution", tags:["C++","RL","Q-learning"], status:"Growing",  r:58, x:260, y:210, vx:0, vy:0 },
    { id:"executionalgosim", label:"ExecutionAlgoSim", sub:"TWAP/VWAP/POV", tags:["C++","Simulation","Baselines"], status:"Prototype", r:54, x:520, y:130, vx:0, vy:0 },
    { id:"miniquantlib", label:"miniquantlib", sub:"numerics core", tags:["C++","Linear algebra","Perf"], status:"Prototype", r:54, x:520, y:310, vx:0, vy:0 },
    { id:"quantprojects", label:"quant-projects", sub:"research library", tags:["Python","Backtesting","Docs"], status:"Core", r:56, x:860, y:230, vx:0, vy:0 },
    { id:"prngpaper", label:"xor-shift PRNG", sub:"paper", tags:["Research","PRNG","Simulation"], status:"Paper", r:54, x:860, y:390, vx:0, vy:0 }
  ],
  edges: [
    { a:"executionrl", b:"executionalgosim", w:1.0, label:"baselines" },
    { a:"executionrl", b:"miniquantlib", w:0.9, label:"core numerics" },
    { a:"miniquantlib", b:"quantprojects", w:0.7, label:"shared utils" },
    { a:"executionalgosim", b:"prngpaper", w:0.45, label:"sim rigor" },
    { a:"executionalgosim", b:"quantprojects", w:0.55, label:"pipeline" },
    { a:"executionrl", b:"quantprojects", w:0.55, label:"documentation" }
  ]
};

const nodeById = new Map(graph.nodes.map(n=>[n.id,n]));
function edgeLen(e){ return 240 - 70*e.w; }

let edgeEls = [];
let flowEls = [];
let nodeEls = [];
let particleEls = [];

function clearGroup(g){
  while(g.firstChild) g.removeChild(g.firstChild);
}

function makeSVG(tag, attrs={}){
  const el = document.createElementNS("http://www.w3.org/2000/svg", tag);
  for (const [k,v] of Object.entries(attrs)) el.setAttribute(k, v);
  return el;
}

function buildGraph(){
  clearGroup(edgesG);
  clearGroup(flowsG);
  clearGroup(particlesG);
  clearGroup(nodesG);

  edgeEls = [];
  flowEls = [];
  particleEls = [];
  nodeEls = [];

  // Edges + flow layer
  graph.edges.forEach((e, i)=>{
    const line = makeSVG("line", { class:"edge", "data-i": String(i) });
    const flow = makeSVG("line", { class:"edge flow", "data-i": String(i) });
    edgesG.appendChild(line);
    flowsG.appendChild(flow);
    edgeEls.push(line);
    flowEls.push(flow);

    // Particles (3 per edge)
    for(let k=0;k<3;k++){
      const p = makeSVG("circle", { class:"particle", r:"2.6", "data-e":String(i) });
      particlesG.appendChild(p);
      particleEls.push({ el:p, e:i, t:Math.random() });
    }
  });

  // Nodes
  graph.nodes.forEach((n)=>{
    // jitter a bit for nice entrance
    n.x = clamp(n.x + rand(-60,60), 80, VIEW_W-80);
    n.y = clamp(n.y + rand(-50,50), 70, VIEW_H-70);
    n.vx = rand(-1,1);
    n.vy = rand(-1,1);

    const g = makeSVG("g", { class:"node", tabindex:"0", role:"button", "data-id": n.id });
    const c = makeSVG("circle", { cx:n.x, cy:n.y, r:n.r });
    const t1 = makeSVG("text", { x:n.x, y:n.y-4, "text-anchor":"middle" });
    t1.textContent = n.label;
    const t2 = makeSVG("text", { x:n.x, y:n.y+18, "text-anchor":"middle", class:"meta" });
    t2.textContent = n.sub;

    nodesG.appendChild(g);
    g.appendChild(c);
    g.appendChild(t1);
    g.appendChild(t2);

    nodeEls.push({ n, g, c, t1, t2 });

    // interactions
    g.addEventListener("mouseenter", (ev)=>showTip(n, ev));
    g.addEventListener("mousemove", (ev)=>moveTip(ev));
    g.addEventListener("mouseleave", hideTip);
    g.addEventListener("click", ()=>jumpToProject(n.id));
    g.addEventListener("keydown", (e)=>{
      if (e.key === "Enter" || e.key === " ") { e.preventDefault(); jumpToProject(n.id); }
    });
  });
}

function showTip(n, ev){
  tipTitle.textContent = n.label;
  tipSub.textContent = `${n.status} · ${n.sub}`;
  tipChips.innerHTML = "";
  n.tags.slice(0,5).forEach(tag=>{
    const d = document.createElement("div");
    d.className = "chip";
    d.textContent = tag;
    tipChips.appendChild(d);
  });
  tipHint.textContent = "Click to open in Grid.";
  tip.style.opacity = "1";
  tip.style.transform = "translateY(0px)";
  moveTip(ev);
}

function moveTip(ev){
  const rect = canvas.getBoundingClientRect();
  const x = ev.clientX - rect.left + 14;
  const y = ev.clientY - rect.top + 14;
  // keep in bounds
  const w = 320, h = 150;
  const nx = clamp(x, 12, rect.width - 12 - w);
  const ny = clamp(y, 12, rect.height - 12 - h);
  tip.style.left = nx + "px";
  tip.style.top = ny + "px";
}

function hideTip(){
  tip.style.opacity = "0";
  tip.style.transform = "translateY(6px)";
}

/* Force simulation */
let freeze = false;

const SIM = {
  repulsion: 6200,   // node-node
  spring: 0.0105,    // edge springs
  damping: 0.84,
  centerPull: 0.0022,
  maxV: 6.0
};

function stepSim(){
  // repulsion
  for (let i=0;i<graph.nodes.length;i++){
    const a = graph.nodes[i];
    for (let j=i+1;j<graph.nodes.length;j++){
      const b = graph.nodes[j];
      const dx = a.x - b.x;
      const dy = a.y - b.y;
      const d2 = dx*dx + dy*dy + 0.001;
      const d = Math.sqrt(d2);
      const minD = (a.r + b.r) * 0.86;
      const push = SIM.repulsion / d2;

      // soft collision
      const overlap = (minD - d);
      const col = overlap > 0 ? overlap * 0.10 : 0;

      const fx = (dx/d) * (push + col);
      const fy = (dy/d) * (push + col);

      a.vx += fx; a.vy += fy;
      b.vx -= fx; b.vy -= fy;
    }
  }

  // springs along edges
  graph.edges.forEach(e=>{
    const a = nodeById.get(e.a);
    const b = nodeById.get(e.b);
    const dx = b.x - a.x;
    const dy = b.y - a.y;
    const d = Math.sqrt(dx*dx + dy*dy) + 0.001;
    const desired = edgeLen(e);
    const diff = (d - desired);
    const k = SIM.spring * (0.6 + e.w); // stronger for higher weight
    const fx = (dx/d) * diff * k;
    const fy = (dy/d) * diff * k;
    a.vx += fx; a.vy += fy;
    b.vx -= fx; b.vy -= fy;
  });

  // center pull
  const cx = VIEW_W/2, cy = VIEW_H/2;
  graph.nodes.forEach(n=>{
    n.vx += (cx - n.x) * SIM.centerPull;
    n.vy += (cy - n.y) * SIM.centerPull;
  });

  // integrate
  graph.nodes.forEach(n=>{
    if (n._drag) return;
    n.vx *= SIM.damping;
    n.vy *= SIM.damping;
    n.vx = clamp(n.vx, -SIM.maxV, SIM.maxV);
    n.vy = clamp(n.vy, -SIM.maxV, SIM.maxV);
    n.x = clamp(n.x + n.vx, 80, VIEW_W-80);
    n.y = clamp(n.y + n.vy, 70, VIEW_H-70);
  });
}

function renderGraph(t){
  // edges
  graph.edges.forEach((e,i)=>{
    const a = nodeById.get(e.a);
    const b = nodeById.get(e.b);

    edgeEls[i].setAttribute("x1", a.x);
    edgeEls[i].setAttribute("y1", a.y);
    edgeEls[i].setAttribute("x2", b.x);
    edgeEls[i].setAttribute("y2", b.y);

    flowEls[i].setAttribute("x1", a.x);
    flowEls[i].setAttribute("y1", a.y);
    flowEls[i].setAttribute("x2", b.x);
    flowEls[i].setAttribute("y2", b.y);
  });

  // animate flow dash offset
  const dash = -((t/18) % 200);
  flowsG.querySelectorAll(".flow").forEach(el=>{
    el.style.strokeDashoffset = String(dash);
  });

  // particles along edges
  particleEls.forEach(p=>{
    const e = graph.edges[p.e];
    const a = nodeById.get(e.a);
    const b = nodeById.get(e.b);

    // move t forward (speed depends on weight)
    p.t += (0.004 + 0.006*e.w);
    if (p.t > 1) p.t -= 1;

    const tt = p.t;
    const x = lerp(a.x, b.x, tt);
    const y = lerp(a.y, b.y, tt);

    p.el.setAttribute("cx", x);
    p.el.setAttribute("cy", y);
    p.el.setAttribute("r", (2.2 + 1.6*Math.sin((tt*6.283)+p.e)) );
    p.el.setAttribute("opacity", String(0.25 + 0.55*(0.5+0.5*Math.sin(tt*6.283))));
  });

  // nodes
  nodeEls.forEach(({n, g, c, t1, t2})=>{
    c.setAttribute("cx", n.x);
    c.setAttribute("cy", n.y);
    c.setAttribute("r", n.r);
    t1.setAttribute("x", n.x);
    t1.setAttribute("y", n.y-4);
    t2.setAttribute("x", n.x);
    t2.setAttribute("y", n.y+18);
  });
}

/* Drag nodes + pan/zoom */
let zoom = 1.0;
let panX = 0;
let panY = 0;

function applyTransform(){
  root.setAttribute("transform", `translate(${panX} ${panY}) scale(${zoom})`);
}

function clientToSvgPoint(clientX, clientY){
  const rect = svg.getBoundingClientRect();
  const x = (clientX - rect.left);
  const y = (clientY - rect.top);
  // inverse transform: (x - pan)/zoom
  return {
    x: (x - panX) / zoom,
    y: (y - panY) / zoom
  };
}

let draggingNode = null;
let dragOffset = {x:0,y:0};
let panning = false;
let panStart = {x:0,y:0, px:0, py:0};

function attachDrags(){
  // node drag
  nodeEls.forEach(({n, g})=>{
    g.addEventListener("pointerdown", (e)=>{
      e.preventDefault();
      g.setPointerCapture(e.pointerId);
      const pt = clientToSvgPoint(e.clientX, e.clientY);
      draggingNode = n;
      n._drag = true;
      dragOffset.x = n.x - pt.x;
      dragOffset.y = n.y - pt.y;
    });
    g.addEventListener("pointermove", (e)=>{
      if (!draggingNode || draggingNode !== n) return;
      const pt = clientToSvgPoint(e.clientX, e.clientY);
      n.x = clamp(pt.x + dragOffset.x, 80, VIEW_W-80);
      n.y = clamp(pt.y + dragOffset.y, 70, VIEW_H-70);
      n.vx = 0; n.vy = 0;
    });
    g.addEventListener("pointerup", ()=>{
      if (draggingNode === n){
        n._drag = false;
        draggingNode = null;
      }
    });
    g.addEventListener("pointercancel", ()=>{
      if (draggingNode === n){
        n._drag = false;
        draggingNode = null;
      }
    });
  });

  // pan background
  bg.addEventListener("pointerdown", (e)=>{
    e.preventDefault();
    panning = true;
    bg.setPointerCapture(e.pointerId);
    panStart.x = e.clientX;
    panStart.y = e.clientY;
    panStart.px = panX;
    panStart.py = panY;
    hideTip();
  });
  bg.addEventListener("pointermove", (e)=>{
    if (!panning) return;
    const dx = e.clientX - panStart.x;
    const dy = e.clientY - panStart.y;
    panX = panStart.px + dx;
    panY = panStart.py + dy;
    applyTransform();
  });
  bg.addEventListener("pointerup", ()=>{ panning = false; });
  bg.addEventListener("pointercancel", ()=>{ panning = false; });

  // wheel zoom
  svg.addEventListener("wheel", (e)=>{
    e.preventDefault();
    const rect = svg.getBoundingClientRect();
    const mx = e.clientX - rect.left;
    const my = e.clientY - rect.top;

    const prev = zoom;
    const delta = -Math.sign(e.deltaY) * 0.08;
    zoom = clamp(zoom * (1 + delta), 0.65, 1.85);

    // zoom around mouse: adjust pan so point stays under cursor
    panX = mx - (mx - panX) * (zoom/prev);
    panY = my - (my - panY) * (zoom/prev);
    applyTransform();
    hideTip();
  }, { passive:false });
}

function resetView(){
  zoom = 1.0;
  panX = 0;
  panY = 0;
  applyTransform();
}

/* FPS */
let lastT = 0;
let frames = 0;
let lastFpsT = 0;

function tick(t){
  if (!running) return;

  if (!freeze){
    stepSim();
  }
  renderGraph(t);

  // fps
  frames++;
  if (!lastFpsT) lastFpsT = t;
  if (t - lastFpsT > 500){
    const fps = Math.round(frames * 1000 / (t - lastFpsT));
    fpsEl.textContent = `${fps} fps`;
    frames = 0;
    lastFpsT = t;
  }

  lastT = t;
  raf = requestAnimationFrame(tick);
}

function startMap(){
  if (running) return;
  running = true;
  freeze = false;
  btnRun.classList.add("active");
  btnFreeze.classList.remove("active");
  buildGraph();
  resetView();
  applyTransform();
  attachDrags();
  raf = requestAnimationFrame(tick);
}

function stopMap(){
  running = false;
  if (raf) cancelAnimationFrame(raf);
  raf = null;
  hideTip();
}

/* map buttons */
btnRun.addEventListener("click", ()=>{
  freeze = false;
  btnRun.classList.add("active");
  btnFreeze.classList.remove("active");
});
btnFreeze.addEventListener("click", ()=>{
  freeze = true;
  btnFreeze.classList.add("active");
  btnRun.classList.remove("active");
});
btnReset.addEventListener("click", resetView);

/* Safety: start map only when map view is opened */
</script>

</body>
</html>
