<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Music</title>
    <meta name="description" content="Album ratings." />
    <style>
      :root{
        --bg:#ffffff;
        --fg:#0b0b0b;
        --muted:#6b6b6b;
        --line:#e9e9e9;
        --shadow:0 12px 30px rgba(0,0,0,.08);
        --r:16px;
        --w:860px;
        --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      }
      *{box-sizing:border-box}
      body{
        margin:0;
        background:var(--bg);
        color:var(--fg);
        font-family:var(--sans);
        -webkit-font-smoothing:antialiased;
        text-rendering:optimizeLegibility;
      }
      a{color:inherit;text-decoration:none}
      a:hover{text-decoration:underline}
      .wrap{max-width:var(--w);margin:0 auto;padding:64px 18px 72px}

      .back{
        display:inline-flex;
        align-items:center;
        gap:8px;
        color:var(--muted);
        font-size:14px;
        margin-bottom:18px;
      }

      h1{margin:0 0 10px;font-size:40px;letter-spacing:-.03em}
      .sub{margin:0 0 18px;color:var(--muted);line-height:1.6;max-width:70ch}
      .mono{font-family:var(--mono)}

      .controls{
        display:flex;
        gap:10px;
        align-items:center;
        flex-wrap:wrap;
        margin:18px 0 18px;
      }
      .inp, .sel{
        border:1px solid var(--line);
        border-radius:14px;
        padding:10px 12px;
        font-size:14px;
        background:#fff;
        color:var(--fg);
        outline:none;
      }
      .inp{flex:1;min-width:240px}
      .sel{min-width:170px}

      .grid{
        margin-top:10px;
        display:grid;
        grid-template-columns:repeat(12,1fr);
        gap:14px;
      }
      .card{
        grid-column:span 6;
        border:1px solid var(--line);
        border-radius:var(--r);
        background:#fff;
        box-shadow:var(--shadow);
        padding:14px;
        display:flex;
        gap:14px;
        min-height:124px;
        cursor:pointer;
        transition:transform .08s ease;
      }
      .card:hover{transform:translateY(-1px)}
      .card:active{transform:translateY(0px)}
      @media (max-width: 860px){ .card{grid-column:span 12} .inp{min-width: 180px} }

      .cover{
        width:86px;height:86px;border-radius:14px;
        border:1px solid var(--line);
        background:linear-gradient(180deg,#fbfbfb,#f2f2f2);
        display:flex;align-items:center;justify-content:center;
        overflow:hidden;
        flex:0 0 auto;
      }
      .cover img{width:100%;height:100%;object-fit:cover}
      .covtxt{
        font-family:var(--mono);
        font-size:12px;
        color:#9b9b9b;
        padding:8px;
        text-align:center;
        line-height:1.2;
      }
      .cmain{flex:1;min-width:0}
      .ctop{display:flex;gap:10px;align-items:flex-start;justify-content:space-between}
      .title{
        font-size:15px;font-weight:650;letter-spacing:-.01em;
        margin:0 0 2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
      }
      .artist{
        font-size:13px;color:var(--muted);
        white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
      }
      .rating{
        font-family:var(--mono);
        font-size:14px;
        padding:6px 10px;
        border-radius:999px;
        border:1px solid var(--line);
        background:#fff;
        flex:0 0 auto;
        white-space:nowrap;
      }
      .row{
        margin-top:10px;
        display:flex;gap:8px;flex-wrap:wrap;align-items:center;
      }
      .tag{
        font-size:12px;
        padding:6px 10px;border-radius:999px;
        border:1px solid var(--line);
        background:#fff;
        color:var(--muted);
      }
      .note{
        margin-top:10px;
        color:var(--fg);
        font-size:13px;
        line-height:1.5;
        display:-webkit-box;
        -webkit-line-clamp:2;
        -webkit-box-orient:vertical;
        overflow:hidden;
      }
      .foot{
        margin-top:32px;
        padding-top:16px;
        border-top:1px solid var(--line);
        color:var(--muted);
        font-size:13px;
        display:flex;justify-content:space-between;gap:14px;flex-wrap:wrap;
      }

      .overlay{
        position:fixed;inset:0;
        background:rgba(0,0,0,.40);
        display:none;
        align-items:center;
        justify-content:center;
        padding:18px;
        z-index:50;
      }
      .overlay[data-open="1"]{display:flex}
      .modal{
        width:min(720px, 100%);
        background:#fff;
        border:1px solid var(--line);
        border-radius:20px;
        box-shadow:0 30px 80px rgba(0,0,0,.25);
        overflow:hidden;
      }
      .mhead{
        padding:16px 16px 14px;
        border-bottom:1px solid var(--line);
        display:flex;
        gap:12px;
        align-items:flex-start;
        justify-content:space-between;
      }
      .mleft{min-width:0}
      .mtitle{
        font-size:16px;
        font-weight:700;
        margin:0 0 2px;
        letter-spacing:-.01em;
        white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
      }
      .martist{
        font-size:13px;
        color:var(--muted);
        margin:0;
        white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
      }
      .mmeta{
        margin-top:10px;
        display:flex;
        gap:8px;
        flex-wrap:wrap;
        align-items:center;
      }
      .close{
        border:1px solid var(--line);
        background:#fff;
        border-radius:12px;
        padding:8px 10px;
        cursor:pointer;
        font-size:14px;
        color:var(--muted);
        line-height:1;
      }
      .close:hover{color:var(--fg)}
      .mbody{
        padding:16px;
        max-height:min(62vh, 560px);
        overflow:auto;
      }
      .mnote{
        font-size:14px;
        line-height:1.7;
        margin:0;
        white-space:pre-wrap;
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <a class="back" href="./index.html">← Home</a>

      <h1>Music</h1>
      <p class="sub">
        Album ratings. Scale: <span class="mono">1–10</span>. Click an album to read the full note.
      </p>

      <div class="controls">
        <input id="q" class="inp" type="search" placeholder="Search album / artist / notes…" autocomplete="off" />
        <select id="genre" class="sel"></select>
      </div>

      <div id="grid" class="grid"></div>

      <div class="foot">
        <div>© <span id="yr"></span> Arya Somu</div>
        <div class="mono">Click any card to expand.</div>
      </div>
    </div>

    <div id="overlay" class="overlay" data-open="0" aria-hidden="true">
      <div class="modal" role="dialog" aria-modal="true" aria-labelledby="mtitle">
        <div class="mhead">
          <div class="mleft">
            <div id="mtitle" class="mtitle"></div>
            <div id="martist" class="martist"></div>
            <div class="mmeta" id="mmeta"></div>
          </div>
          <button id="close" class="close" type="button">Close</button>
        </div>
        <div class="mbody">
          <p id="mnote" class="mnote"></p>
        </div>
      </div>
    </div>

    <script>
      const albums = [
        {
          title: "ca$ino",
          artist: "baby keem",
          year: 2026,
          genre: ["rap"],
          rating: 9.7,
          note: "this album made me realize you just gotta listen to some things by yourself. i initially listened to this with my roommate, bruce, and we were distracted looking at Howard investment groups IB placements for whatever reason, and I didn't appreciat the technical depth of this album. however, on second listen, songs like no blame damn near brought me to tears, and some of the standout tracks were ca$ino, dramatic girl, and $ex appeal. overall, incredible project, everyone should go listen.",
          added: "2026-02-25",
          cover: ""
        },
        {
          title: "octane",
          artist: "don toliver",
          year: 2026,
          genre: ["melodic hip-hop"],
          rating: 8.7,
          note: "the highs were super high and some of the lows were forgettable. e85, body, rendezvous, and secondhand to open the album was INSANE. overall, great project, but there is some filler fs.",
          added: "2026-02-25",
          cover: ""
        },
        {
          title: "icon",
          artist: "brent faiyaz",
          year: 2026,
          genre: ["rnb"],
          rating: 7.2,
          note: "some really good songs on here, but overall i felt that a lot of the music on here sounded a little too similar to his past cuts.",
          added: "2026-02-25",
          cover: ""
        }
      ];

      const elQ = document.getElementById("q");
      const elGenre = document.getElementById("genre");
      const elGrid = document.getElementById("grid");
      const elYr = document.getElementById("yr");

      const elOverlay = document.getElementById("overlay");
      const elClose = document.getElementById("close");
      const elMTitle = document.getElementById("mtitle");
      const elMArtist = document.getElementById("martist");
      const elMMeta = document.getElementById("mmeta");
      const elMNote = document.getElementById("mnote");

      elYr.textContent = new Date().getFullYear();

      const norm = (s) => (s ?? "").toString().toLowerCase().trim();

      const escapeHtml = (s) =>
        (s ?? "").toString()
          .replaceAll("&","&amp;")
          .replaceAll("<","&lt;")
          .replaceAll(">","&gt;")
          .replaceAll('"',"&quot;")
          .replaceAll("'","&#039;");

      const uniqueGenres = () => {
        const s = new Set();
        albums.forEach(a => (a.genre || []).forEach(g => s.add(g)));
        return ["All", ...Array.from(s).sort((a,b)=>a.localeCompare(b))];
      };

      const setGenreOptions = () => {
        const gs = uniqueGenres();
        elGenre.innerHTML = gs.map(g => `<option value="${escapeHtml(g)}">${escapeHtml(g)}</option>`).join("");
      };

      const ratingText = (x) => (typeof x === "number") ? x.toFixed(1) : (x ?? "—");

      const tagPill = (t) => `<span class="tag">${escapeHtml(t)}</span>`;

      const cardHtml = (a, idx) => {
        const cover = a.cover
          ? `<img src="${escapeHtml(a.cover)}" alt="${escapeHtml(a.title)} cover" loading="lazy" />`
          : `<div class="covtxt">${escapeHtml(a.title)}<br/>${escapeHtml(a.artist)}</div>`;

        const tags = [
          ...(a.genre || []),
          (a.year ? String(a.year) : "")
        ].filter(Boolean).map(tagPill).join("");

        return `
          <div class="card" data-idx="${idx}" role="button" tabindex="0" aria-label="Open ${escapeHtml(a.title)} by ${escapeHtml(a.artist)}">
            <div class="cover">${cover}</div>
            <div class="cmain">
              <div class="ctop">
                <div style="min-width:0">
                  <div class="title">${escapeHtml(a.title || "Untitled")}</div>
                  <div class="artist">${escapeHtml(a.artist || "Unknown artist")}</div>
                </div>
                <div class="rating">${escapeHtml(ratingText(a.rating))} / 10</div>
              </div>
              <div class="row">${tags}</div>
              <div class="note">${escapeHtml(a.note || "")}</div>
            </div>
          </div>
        `;
      };

      const matches = (a, q) => {
        if (!q) return true;
        const bag = [a.title, a.artist, a.year, (a.genre||[]).join(" "), a.note].map(norm).join(" | ");
        return bag.includes(q);
      };

      const genreOk = (a, g) => {
        if (!g || g === "All") return true;
        return (a.genre || []).some(x => x === g);
      };

      const openModal = (a) => {
        elMTitle.textContent = a.title || "Untitled";
        elMArtist.textContent = a.artist || "Unknown artist";

        const pills = [
          ...(a.genre || []),
          (a.year ? String(a.year) : ""),
          (`${ratingText(a.rating)} / 10`)
        ].filter(Boolean);

        elMMeta.innerHTML = pills.map(tagPill).join("");
        elMNote.textContent = a.note || "";

        elOverlay.setAttribute("data-open","1");
        elOverlay.setAttribute("aria-hidden","false");
      };

      const closeModal = () => {
        elOverlay.setAttribute("data-open","0");
        elOverlay.setAttribute("aria-hidden","true");
      };

      const render = () => {
        const q = norm(elQ.value);
        const g = elGenre.value || "All";

        const items = albums
          .map((a, idx) => ({a, idx}))
          .filter(x => genreOk(x.a, g))
          .filter(x => matches(x.a, q))
          .slice()
          .sort((x,y) => (y.a.rating ?? -1) - (x.a.rating ?? -1));

        elGrid.innerHTML = items.map(x => cardHtml(x.a, x.idx)).join("") ||
          `<div style="grid-column:span 12;color:var(--muted);padding:10px 2px">No results.</div>`;

        [...elGrid.querySelectorAll(".card")].forEach(card => {
          const idx = Number(card.getAttribute("data-idx"));
          card.addEventListener("click", () => openModal(albums[idx]));
          card.addEventListener("keydown", (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              openModal(albums[idx]);
            }
          });
        });
      };

      elQ.addEventListener("input", render);
      elGenre.addEventListener("change", render);

      elClose.addEventListener("click", closeModal);
      elOverlay.addEventListener("click", (e) => {
        if (e.target === elOverlay) closeModal();
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeModal();
      });

      setGenreOptions();
      render();
    </script>
  </body>
</html>
